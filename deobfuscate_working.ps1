$mappings = @{}
$mappings["_6"] = "KeyBindingWrapper"
$mappings["yS"] = "KeyBindingManager"
$mappings["yP"] = "EventBus"
$mappings["JV"] = "RotationManager"
$mappings["vD"] = "HotbarManager"
$mappings["ym"] = "MinecraftHelper"
$mappings["vV"] = "RenderHelper"
$mappings["yj"] = "RotationHelper"
$mappings["zk"] = "AimHelper"
$mappings["yL"] = "ModuleManager"
$mappings["zy"] = "EvonClient"
$mappings["vJ"] = "ModuleBase"
$mappings["B"] = "Property"
$mappings["vt"] = "Event"
$mappings["vq"] = "MovementEvent"
$mappings["vE"] = "StepEvent"
$mappings["vg"] = "ItemUseCooldownEvent"
$mappings["z0"] = "VelocityUpdateEvent"
$mappings["yr"] = "MoveEvent"
$mappings["vS"] = "PostMovementEvent"
$mappings["y3"] = "GameLoopEvent"
$mappings["J0"] = "BlockPlaceEvent"
$mappings["vf"] = "ChatMessageEvent"
$mappings["v3"] = "PacketReceiveEvent"
$mappings["v2"] = "PacketSendEvent"
$mappings["v1"] = "PreMovementEvent"
$mappings["e"] = "RenderEvent"
$mappings["g_"] = "ResolutionChangeEvent"
$mappings["yf"] = "RenderEvent"
$mappings["_d"] = "ClientPlayerInteractionManagerAccessor"
$mappings["JL"] = "EventMarker"
$mappings["_G"] = "PacketWrapper"
$mappings["z3"] = "FrustumManager"
$mappings["__"] = "PathFinder"
$mappings["_0"] = "RotationMathHelper"
$mappings["z5"] = "PathNode"
$mappings["J4"] = "PathNodeComparator"
$mappings["_1"] = "Side"
$mappings["z_"] = "StringList"
$mappings["yB"] = "RaycastResult"
$mappings["vU"] = "RaycastHelper"
$mappings["_v"] = "MathUtil"
$mappings["Jd"] = "StringArrayHelper"
$mappings["ds"] = "ObfuscationHelper"
$mappings["gQ"] = "Module"
$mappings["C"] = "StaticEventBus"
$mappings["_S"] = "EventListenerAnnotation"
$mappings["h"] = "EventDispatcher"
$mappings["vK"] = "JoinWorldEvent"
$mappings["_c"] = "AimHelperUtil"
$mappings["J_"] = "PositionHelper"
$mappings["gY"] = "PacketHelper"
$mappings["vA"] = "ModuleHelper"
$mappings["vz"] = "ConfigHelper"
$mappings["yQ"] = "RenderUtil"
$mappings["ya"] = "ColorHelper"
$mappings["zP"] = "BlockHelper"
$mappings["_2"] = "UIModule"
$mappings["_3"] = "UIComponent"
$mappings["_4"] = "Command"
$mappings["_5"] = "BlockStateWrapper"
$mappings["yK"] = "KillAuraModule"
$mappings["yN"] = "TickEvent"
$mappings["yO"] = "CollisionHelper"
$mappings["z2"] = "AuthScreen"
$mappings["z4"] = "IntEventMarker"
$mappings["z7"] = "FontRenderer"
$mappings["zi"] = "ScreenBase"
$mappings["yH"] = "AuthProvider"
$mappings["zg"] = "AnimationType"
$mappings["_J"] = "AnimationValue"
$mappings["_h"] = "ModuleBase2"
$mappings["_R"] = "CommandBase"
$mappings["t"] = "Category"
$mappings["gn"] = "CombatCategory"
$mappings["_y"] = "ItemType"
$mappings["yd"] = "BooleanHelper"
$mappings["JQ"] = "ItemHelper"
$mappings["Jz"] = "ScreenHelper"
$mappings["y8"] = "StringArrayHelper"
$mappings["zD"] = "MicrosoftAuthHelper"
$mappings["_7"] = "UIModule2"
$mappings["_8"] = "FontWeightMapper"
$mappings["_9"] = "EntityCommand"
$mappings["_A"] = "HypixelCommand"
$mappings["_B"] = "Triple"
$mappings["_F"] = "Command2"
$mappings["_I"] = "Command3"
$mappings["_K"] = "Command4"
$mappings["_L"] = "Command5"
$mappings["_M"] = "Command6"
$mappings["_N"] = "Command7"
$mappings["_O"] = "Command8"
$mappings["_P"] = "Command9"
$mappings["_Q"] = "Command10"
$mappings["_T"] = "UIModule3"
$mappings["_U"] = "UIStyle"
$mappings["_V"] = "UIBase"
$mappings["_W"] = "Command13"
$mappings["_X"] = "Command14"
$mappings["A"] = "FontWeight"
$mappings["Z"] = "CooldownTimer"
$mappings["z6"] = "HypixelErrorEvent"
$mappings["z8"] = "ConfigManager"
$mappings["z9"] = "PacketRecord"
$mappings["zA"] = "ConfigEntry"
$mappings["zB"] = "ConfigFile"
$mappings["zC"] = "ConfigProviderImpl"
$mappings["zE"] = "ServerConnector"
$mappings["zF"] = "ConfigDeserializer2"
$mappings["zG"] = "ServerInfo"
$mappings["zH"] = "ConfigWriter"
$mappings["zI"] = "ScreenComponent"
$mappings["zJ"] = "EventListenerRegistry"
$mappings["zK"] = "TypeTokenMap3"
$mappings["zL"] = "UIPanel"
$mappings["zM"] = "PacketFilter"
$mappings["zN"] = "PlayerInfo"
$mappings["zO"] = "WebSocketHelper"
$mappings["zQ"] = "CommandAliasList"
$mappings["zR"] = "ModuleContainer"
$mappings["zS"] = "CategorySwitch"
$mappings["zT"] = "MessageType"
$mappings["zU"] = "ConfigBackup"
$mappings["zV"] = "ConfigRestore"
$mappings["zW"] = "ConfigInterface"
$mappings["zX"] = "ConfigProvider"
$mappings["zY"] = "HypixelPacketHandler"
$mappings["zZ"] = "TextRecord"
$mappings["yJ"] = "IntWrapper"
$mappings["yM"] = "KillEffect"
$mappings["yR"] = "PacketModule"
$mappings["yY"] = "MainMenuButton"
$mappings["yZ"] = "UIRecord"
$mappings["yT"] = "RunnableRecord"
$mappings["yU"] = "Module3"
$mappings["yV"] = "Module4"
$mappings["yW"] = "Module5"
$mappings["yX"] = "Module6"
$mappings["zv"] = "ConfigHelper3"
$mappings["_r"] = "CommandBase2"
$mappings["_C"] = "Command15"
$mappings["_D"] = "EventMarkerImpl"
$mappings["_H"] = "UserType"
$mappings["J6"] = "UIHelper"
$mappings["Js"] = "UIHelper2"
$mappings["JX"] = "TextComponent"
$mappings["Jt"] = "Manager1"
$mappings["JK"] = "Manager2"
$mappings["JR"] = "Manager3"
$mappings["zo"] = "Category"
$mappings["yt"] = "RunnableRecord"
$mappings["zq"] = "CommandAliasList"
$mappings["_o"] = "Command8"
$mappings["_s"] = "EventListenerAnnotation"
$mappings["zz"] = "ScreenBase"
$mappings["z1"] = "EventListenerRecord"
$mappings["_E"] = "EventMarkerImpl2"

Write-Host "Starting deobfuscation..."
$decompiledFiles = Get-ChildItem -Path "decompiled\club\evon" -Filter "*.java" -Recurse
$total = $decompiledFiles.Count
$current = 0
$processed = 0

foreach ($file in $decompiledFiles) {
    $current++
    $className = $file.BaseName
    
    if ($mappings.ContainsKey($className)) {
        $newName = $mappings[$className]
        $newPath = $file.FullName -replace [regex]::Escape($className), $newName
        
        if (Test-Path $newPath) {
            continue
        }
        
        Write-Progress -Activity "Deobfuscating" -Status "$className -> $newName" -PercentComplete (($current / $total) * 100)
        Write-Host "[$current/$total] $className -> $newName"
        
        $content = Get-Content -Path $file.FullName -Raw -Encoding UTF8
        
        $content = $content -replace "public (final |abstract )?class $className\b", "public `$1class $newName"
        $content = $content -replace "final class $className\b", "final class $newName"
        $content = $content -replace "class $className\b", "class $newName"
        $content = $content -replace "enum $className\b", "enum $newName"
        $content = $content -replace "interface $className\b", "interface $newName"
        $content = $content -replace "import club\.evon\.$className\b", "import club.evon.$newName"
        
        foreach ($oldName in $mappings.Keys) {
            $newClassName = $mappings[$oldName]
            if ($oldName -ne $className) {
                $escapedOldName = [regex]::Escape($oldName)
                $pattern = "\b$escapedOldName\b"
                $content = $content -replace $pattern, $newClassName
            }
        }
        
        $dir = Split-Path -Parent $newPath
        if (-not (Test-Path $dir)) {
            New-Item -ItemType Directory -Force -Path $dir | Out-Null
        }
        
        Set-Content -Path $newPath -Value $content -Encoding UTF8 -NoNewline
        $processed++
    }
}

Write-Host ""
Write-Host "Complete! Processed $processed of $total files"

